{% extends 'base.html' %} {% load static %} {% block stylesheet %}

<style>
  .tab-active {
    color: #ff8a00;
    border-bottom: 3px solid #ff8a00;
  }

  .form-input {
    display: block;
    width: 100%;
    padding: 0.75rem 1rem;
    color: #4b5563;
    background-color: #fff;
    border: 1px solid #d1d5db;
    border-radius: 0.375rem;
    transition: all 0.2s;
  }

  .form-input:focus {
    border-color: #ff8a00;
    box-shadow: 0 0 0 2px rgba(255, 138, 0, 0.2);
    outline: none;
  }

  .auth-container {
    background-image: url("https://source.unsplash.com/1600x900/?pets,dogs,cats");
    background-size: cover;
    background-position: center;
  }

  .auth-overlay {
    background: rgba(0, 0, 0, 0.7);
  }

  .password-container {
    position: relative;
  }

  .password-toggle {
    position: absolute;
    right: 14px;
    top: 50%;
    transform: translateY(-50%);
    cursor: pointer;
    color: #6b7280;
  }

  .form-checkbox {
    border-radius: 0.25rem;
    border-color: #d1d5db;
    color: #ff8a00;
    height: 1.25rem;
    width: 1.25rem;
    transition: all 0.2s;
  }

  .form-checkbox:focus {
    box-shadow: 0 0 0 2px rgba(255, 138, 0, 0.2);
  }

  .auth-card {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
    backdrop-filter: blur(5px);
  }

  /* Animation for tab switching */
  .tab-content {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  .tab-content.active {
    opacity: 1;
    transform: translateY(0);
  }

  .login-tab,
  .register-tab {
    display: block;
  }
</style>

{% endblock stylesheet %} {% block title %} {{title}} {% endblock title %}


{% block content %}

<!-- Auth Section -->
<section class="auth-container min-h-screen flex items-center justify-center py-12 px-4">
  <div class="auth-overlay absolute inset-0"></div>

  <div class="relative z-10 max-w-md w-full">
    <div class="bg-white bg-opacity-95 rounded-xl auth-card overflow-hidden">
      <!-- Auth Header with Tabs -->
      <div class="flex border-b border-gray-200">
        <button id="login-tab"
          class="tab-btn w-1/2 px-4 py-4 text-center font-bold text-lg {% if active_tab == 'login-tab' %}tab-active{% endif %}">
          Masuk
        </button>
        <button id="register-tab"
          class="tab-btn w-1/2 px-4 py-4 text-center font-bold text-lg {% if active_tab == 'register-tab' %}tab-active{% endif %}">
          Daftar
        </button>
      </div>

      <!-- Login Form -->
      <div id="login-content" class="tab-content {% if active_tab == 'login-tab' %}active login-tab{% endif %} p-8" 
      {% if active_tab == 'register-tab' %}style="display: none"{% endif %}>
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800">
            Selamat Datang Kembali!
          </h2>
          <p class="text-gray-600 mt-2">
            Masuk untuk mengakses akun Bubu Petshop Anda
          </p>
        </div>


        {% if messages %}
        {% for message in messages %}
        {% if message.tags == "error" %}
        <div class="mb-4">
          <p class="text-red-500 text-sm text-center">{{ message }}</p>
        </div>
        {% endif %}
        {% if message.tags == "success" %}
        <div class="mb-4">
          <p class="text-green-500 text-sm text-center">{{ message }}</p>
        </div>
        {% endif %}
       
        {% endfor %}
        {% endif %}

        <form id="login-form" method="POST" action="{% url 'user:login' %}">
          {% csrf_token %}
          <!-- Email -->
          <div class="mb-6">
            <label for="login-email" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="login-email" name="emailform" class="form-input" placeholder="nama@email.com"
              required />
          </div>

          <!-- Password -->
          <div class="mb-4">
            <label for="login-password" class="block mb-2 text-sm font-medium text-gray-700">Password</label>
            <div class="password-container">
              <input type="password" id="login-password" name="pwform" class="form-input" placeholder="••••••••"
                required />
              <span class="password-toggle" data-for="login-password">
                <i class="far fa-eye"></i>
              </span>
            </div>
          </div>

          <!-- Remember Me & Forgot Password -->
          {% comment %} <div class="flex items-center justify-between mb-6">
            <div class="flex items-center">
              <input id="remember-me" type="checkbox" name="remember-me" class="form-checkbox" />
              <label for="remember-me" class="ml-2 text-sm text-gray-600">Ingat saya</label>
            </div>
            <a href="#" class="text-sm text-orange-theme hover:underline">Lupa password?</a>
          </div> {% endcomment %}

          <!-- Submit Button -->
          <div class="mb-6">
            <button type="submit" name="submit" value="masuk"
              class="w-full py-3 px-4 orange-theme text-white font-bold rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-theme focus:ring-opacity-50 transition-colors duration-300">
              Masuk
            </button>
          </div>
        </form>
      </div> <!-- Register Form -->
      <div id="register-content"
        class="tab-content {% if active_tab == 'register-tab' %}active register-tab{% endif %} p-8" 
        {% if active_tab == 'login-tab' %}style="display: none"{% endif %}>
        <div class="text-center mb-8">
          <h2 class="text-2xl font-bold text-gray-800">Buat Akun Baru</h2>
          <p class="text-gray-600 mt-2">
            Daftar untuk menikmati layanan Bubu Petshop
          </p>
        </div>


        <form id="register-form" method="POST" action="{% url 'user:login' %}">
          {% csrf_token %}
          <!-- Name -->
          <div class="mb-6">
            <label for="register-name" class="block mb-2 text-sm font-medium text-gray-700">Nama Lengkap</label>
            <input type="text" id="register-name" name="nama" class="form-input" placeholder="Nama lengkap Anda"
              required value="{{ old.nama|default_if_none:'' }}">
            {% if error.nama %}
            <p class="text-red-500 text-xs mt-1">{{ error.nama.0 }}</p>
            {% endif %}
          </div>

          <!-- Email -->
          <div class="mb-6">
            <label for="register-email" class="block mb-2 text-sm font-medium text-gray-700">Email</label>
            <input type="email" id="register-email" name="email" class="form-input" placeholder="nama@email.com"
              required value="{{ old.email|default_if_none:'' }}">
            {% if error.email %}
            <p class="text-red-500 text-xs mt-1">{{ error.email.0 }}</p>
            {% endif %}
          </div>

          <!-- Phone -->
          <div class="mb-6">
            <label for="register-phone" class="block mb-2 text-sm font-medium text-gray-700">Nomor Telepon</label>
            <input type="tel" id="register-phone" name="no_hp" class="form-input" placeholder="08xxxxxxxxxx" required
              value="{{ old.no_hp|default_if_none:'' }}">
            {% if error.no_hp %}
            <p class="text-red-500 text-xs mt-1">{{ error.no_hp.0 }}</p>
            {% endif %}
          </div>

          <!-- Alamat -->
          <div class="mb-6">
            <label for="register-alamat" class="block mb-2 text-sm font-medium text-gray-700">Alamat</label>
            <textarea id="register-alamat" name="alamat" class="form-input" placeholder="Alamat lengkap Anda"
              required>{{ old.alamat|default_if_none:'' }}</textarea>
            {% if error.alamat %}
            <p class="text-red-500 text-xs mt-1">{{ error.alamat.0 }}</p>
            {% endif %}
          </div>

          <!-- Password -->
          <div class="mb-6">
            <label for="register-password" class="block mb-2 text-sm font-medium text-gray-700">Password</label>
            <div class="password-container">
              <input type="password" id="register-password" name="password1" class="form-input"
                placeholder="Minimal 8 karakter" required value="{{ old.password1|default_if_none:'' }}">
              <span class="password-toggle" data-for="register-password">
                <i class="far fa-eye"></i>
              </span>
            </div>
            <p class="text-xs text-gray-500 mt-2">
              Password harus minimal 8 karakter dan mengandun huruf dan angka
            </p>
            {% if error.password1 %}
            <p class="text-red-500 text-xs mt-1">{{ error.password1.0 }}</p>
            {% endif %}
          </div>

          <!-- Confirm Password -->
          <div class="mb-6">
            <label for="register-confirm-password" class="block mb-2 text-sm font-medium text-gray-700">Konfirmasi
              Password</label>
            <div class="password-container">
              <input type="password" id="register-confirm-password" name="password2" class="form-input"
                placeholder="Konfirmasi password" required value="{{ old.password2|default_if_none:'' }}">
              <span class="password-toggle" data-for="register-confirm-password">
                <i class="far fa-eye"></i>
              </span>
            </div>
            {% if error.password2 %}
            <p class="text-red-500 text-xs mt-1">{{ error.password2.0 }}</p>
            {% endif %}
          </div>

          <!-- Terms and Conditions -->
          {% comment %} <div class="mb-6">
            <div class="flex items-start">
              <input id="terms" type="checkbox" class="form-checkbox mt-1" required />
              <label for="terms" class="ml-2 text-sm text-gray-600">
                Saya menyetujui
                <a href="#" class="text-orange-theme hover:underline">Syarat & Ketentuan</a>
                dan
                <a href="#" class="text-orange-theme hover:underline">Kebijakan Privasi</a>
              </label>
            </div>
          </div> {% endcomment %}

          <!-- Submit Button -->
          <div class="mb-6">
            <button type="submit" name="submit" value="daftar"
              class="w-full py-3 px-4 orange-theme text-white font-bold rounded-lg hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-theme focus:ring-opacity-50 transition-colors duration-300">
              Daftar Sekarang
            </button>
          </div>
        </form>
      </div>
    </div>


  </div>
</section>

{% endblock content %} {% block scriptsheet %}
<script>
  document.addEventListener("DOMContentLoaded", function () {
    // Tab Switching Logic
    const loginTab = document.getElementById("login-tab");
    const registerTab = document.getElementById("register-tab");
    const loginContent = document.getElementById("login-content");
    const registerContent = document.getElementById("register-content");

    loginTab.addEventListener("click", function () {
      // Update tab buttons
      loginTab.classList.add("tab-active");
      registerTab.classList.remove("tab-active");

      // Show/hide content with animation
      loginContent.style.display = "block";
      setTimeout(() => {
        loginContent.classList.add("active");
      }, 10);

      registerContent.classList.remove("active");
      setTimeout(() => {
        registerContent.style.display = "none";
      }, 300);
    });

    registerTab.addEventListener("click", function () {
      // Update tab buttons
      registerTab.classList.add("tab-active");
      loginTab.classList.remove("tab-active");

      // Show/hide content with animation
      registerContent.style.display = "block";
      setTimeout(() => {
        registerContent.classList.add("active");
      }, 10);

      loginContent.classList.remove("active");
      setTimeout(() => {
        loginContent.style.display = "none";
      }, 300);
    });

    // Password Toggle Visibility
    const toggleButtons = document.querySelectorAll(".password-toggle");

    toggleButtons.forEach((button) => {
      button.addEventListener("click", function () {
        const passwordField = document.getElementById(
          this.getAttribute("data-for")
        );
        const icon = this.querySelector("i");

        if (passwordField.type === "password") {
          passwordField.type = "text";
          icon.classList.remove("fa-eye");
          icon.classList.add("fa-eye-slash");
        } else {
          passwordField.type = "password";
          icon.classList.remove("fa-eye-slash");
          icon.classList.add("fa-eye");
        }
      });
    });
  });
</script>
{% endblock scriptsheet %}